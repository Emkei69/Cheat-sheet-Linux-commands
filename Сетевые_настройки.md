
# > Быстрая инструкция по базовой настройке сети и NAT на Linux

# Имя хоста
```hostnamectl hostname MyNetwork
exec bash```

#Настройка внутренних интерфейсов
```mkdir -p /etc/net/ifaces/intf1
mkdir -p /etc/net/ifaces/intf2```

```echo 'TYPE=eth' > /etc/net/ifaces/intf1/options
echo 'TYPE=eth' > /etc/net/ifaces/intf2/options```

```echo '172.16.4.1/28' > /etc/net/ifaces/intf1/ipv4address
echo '172.16.5.1/28' > /etc/net/ifaces/intf2/ipv4address```

# Настройка NAT (nftables)

# Установка и настройка:

```apt-get update && apt-get install nftables -y
Конфигурация /etc/nftables/nftables.nft:```

# !/usr/sbin/nft -f

```flush ruleset

table ip nat {
    chain postrouting {
        type nat hook postrouting priority srcnat;
        oifname "intf3" masquerade
    }
}```

# Запуск и автозапуск службы:

```systemctl enable --now nftables
Подробнее:
Arch Linux - Nftables (рус)```

# Включение маршрутизации
```echo net.ipv4.ip_forward=1 >> /etc/net/sysctl.conf```

# Перезагрузка сети
```systemctl restart network```

```sysctl -p
sysctl net.ipv4.ip_forward```
